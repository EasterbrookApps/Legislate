# minimal.sparql â€” Bare-minimum probe for recent SIs
# Goal: prove the endpoint returns *any* SIs since ?since.
# Strategy:
# - Match StatutoryInstrumentPaper -> WorkPackage
# - Try laid-step dates (Commons/Lords). If not present, fall back to ANY BusinessItem date.
# - Return only id, title, date.
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX :     <https://id.parliament.uk/schema/>
PREFIX id:   <https://id.parliament.uk/>
PREFIX xsd:  <http://www.w3.org/2001/XMLSchema#>

SELECT DISTINCT ?workPackage ?SI ?title ?date WHERE {
  ?SI a :StatutoryInstrumentPaper ;
      :workPackagedThingHasWorkPackage ?workPackage ;
      rdfs:label ?title .

  {
    ?workPackage :workPackageHasBusinessItem ?bi1 .
    ?bi1 :businessItemHasProcedureStep id:cspzmb6w ;   # Commons laid
         :businessItemDate ?date .
  }
  UNION
  {
    ?workPackage :workPackageHasBusinessItem ?bi2 .
    ?bi2 :businessItemHasProcedureStep id:WkH5enjt ;   # Lords laid
         :businessItemDate ?date .
  }
  UNION
  {
    # Fallback: any BusinessItem date (to prove the dataset has recent activity)
    ?workPackage :workPackageHasBusinessItem ?bi3 .
    ?bi3 :businessItemDate ?date .
  }

  FILTER ( ?date >= ?since )
}
ORDER BY DESC(?date)
