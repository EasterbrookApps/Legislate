
:root{
  --bg:#0b0f14; --panel:#101722; --ink:#e9eef6; --muted:#9fb1cc; --accent:#4bb5ff;
  --ring:#1f2b40;
  --orange:#ff9f43;   /* Early stages */
  --green:#18d18c;    /* Commons */
  --red:#ff6b6b;      /* Lords */
  --blue:#58a6ff;     /* Implementation */
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:radial-gradient(1200px 700px at 20% 10%, #0f1722, #0b0f14 60%);color:var(--ink);font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
#app{padding:20px; max-width:1400px; margin:0 auto;}
a{color:var(--accent)}
button{appearance:none;border:0;border-radius:14px;padding:12px 16px;background:#1b2636;color:var(--ink);cursor:pointer;font-weight:700;box-shadow:0 1px 0 rgba(255,255,255,.05) inset, 0 10px 24px rgba(0,0,0,.35);transition: .2s}
button:hover{background:#223148}
button:active{transform:translateY(1px)}
button.secondary{background:#0f1722;border:1px solid #233046}
button.cta{background:linear-gradient(180deg,#3cc8ff,#2aa0ff);color:#03121f}
input.input{background:#0f1722;border:1px solid #223148;color:var(--ink);border-radius:12px;padding:10px 12px}
.small{color:var(--muted);font-size:13px}
.badge{padding:6px 12px;border-radius:999px;background:#0f1722;border:1px solid #233046;color:#c9d7ee;font-size:12px}
.grid{display:grid;grid-template-columns: 480px 1fr;gap:24px;align-items:start}
@media (max-width: 1100px){ .grid{grid-template-columns:1fr;} }
.card{background:linear-gradient(180deg,#111821,#0e141d);border:1px solid var(--ring);border-radius:18px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
.h{font-size:22px;font-weight:900;letter-spacing:.3px;margin:0 0 10px}
.setup-row{display:flex;gap:8px;align-items:center;margin-bottom:8px}
.color-dot{width:14px;height:14px;border-radius:50%;display:inline-block;border:2px solid #0d1117}
.stage-chip{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid #20304a; background:#0c1320; font-size:12px}

/* Board */
.board-wrap{width:min(95vw, 1100px);aspect-ratio:1/1;margin:0 auto;background:#09101a;border:1px solid var(--ring);border-radius:20px;position:relative;overflow:hidden;box-shadow:0 20px 50px rgba(0,0,0,.45)}
.board-img{position:absolute; inset:0; background-image:url('https://raw.githubusercontent.com/edent/Legislate/master/Board/Legislate.png'); background-size:cover; background-position:center; filter:saturate(1.05) contrast(1.02)}

/* Tokens */
.token{position:absolute;width:34px;height:34px;border-radius:50%;box-shadow: 0 8px 20px rgba(0,0,0,.45), 0 0 0 3px #0008 inset;display:flex;align-items:center;justify-content:center;font-weight:900;color:#04131f;transform: translate(-50%, -50%);transition: left .35s ease, top .35s ease;}
.token .label{position:absolute; top:36px; left:50%; transform:translateX(-50%); font-size:12px; color:#d7e6ff; text-shadow:0 1px 0 #000}
.token.turn{outline:3px solid #fff5; z-index:5}

/* Dice & lists */
.dice{width:72px;height:72px;border-radius:14px;background:#0f1722;border:1px solid #20304a;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:900;box-shadow:0 10px 30px rgba(0,0,0,.45)}
.dice.rolling{animation: wobble .5s ease}
@keyframes wobble{ 0%{transform:rotate(0)} 25%{transform:rotate(10deg)} 75%{transform:rotate(-10deg)} 100%{transform:rotate(0)} }
.playerlist{display:flex; flex-direction:column; gap:6px}
.playercard{display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border-radius:12px; background:#0c1320; border:1px solid #20304a}
.playercard .name{display:flex; align-items:center; gap:8px; font-weight:700}
.turnarrow{margin-left:6px; font-size:18px}

/* Calibration */
.calib-bar{margin-top:10px; display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.path-ghost{position:absolute; inset:0; pointer-events:none}
.path-ghost .pt{position:absolute; width:10px; height:10px; border-radius:50%; background:#fff8; transform:translate(-50%,-50%);}
.calib-dot{position:absolute;width:10px;height:10px;border-radius:50%;background:#fff;outline:2px solid #000a;transform:translate(-50%,-50%);}


/* === Centered Card Modal === */
.card-modal { position: fixed; inset: 0; display: grid; place-items: center; z-index: 1000; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
.card-modal.hidden { display: none; }
.card-modal__backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.55); backdrop-filter: blur(2px); }
.card-modal__panel { position: relative; width: min(90vw, 580px); background: #0b1320; color:#fff; border-radius: 16px; box-shadow: 0 12px 40px rgba(0,0,0,.25); display: grid; grid-template-rows: auto 1fr auto; max-height: 80vh; transform: scale(.98); opacity: 0; animation: card-in .18s ease-out forwards; }
.card-modal__header { padding: 16px 20px; border-bottom: 1px solid #20304a; }
.card-modal__title { margin: 0; font-size: 1.2rem; font-weight: 700; letter-spacing: .2px; }
.card-modal__close { position: absolute; top: 10px; right: 10px; border: 0; background: transparent; font-size: 1.5rem; line-height: 1; cursor: pointer; opacity: .7; color:#fff; }
.card-modal__close:hover { opacity: 1; }
.card-modal__body { padding: 20px; font-size: 1.05rem; line-height: 1.5; white-space: pre-wrap; }
.card-modal__footer { padding: 16px 20px; border-top: 1px solid #20304a; display: flex; justify-content: flex-end; gap: 12px; }
.card-modal__btn { padding: 10px 16px; border-radius: 10px; border: 1px solid #2a3b58; background: #1a2640; color: #fff; cursor: pointer; }
.card-modal__btn:hover { filter: brightness(1.05); }
@keyframes card-in { to { transform: scale(1); opacity: 1; } }


/* Mobile stability: avoid text auto-resize and ensure GPU compositing for tokens */
html { -webkit-text-size-adjust: 100%; }
.board-img{ will-change: transform; }
.token{ transform: translate(-50%, -50%) translateZ(0); }
