:root {
  --border: #b1b4b6;
  --text: #0b0c0c;
  --muted: #505a5f;
  --bg: #fff;
}

/* Base */
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
}

/* Layout */
.page-header, .page-main {
  max-width: 1100px;
  margin: 0 auto;
  padding: 1rem;
}
.brand { font-weight: 700; font-size: 1.25rem; }
.controls { display: flex; gap: .5rem; align-items: center; flex-wrap: wrap; }
.button { border: 1px solid var(--border); background: #f3f2f1; padding: .4rem .8rem; border-radius: .35rem; cursor: pointer; }
.button--secondary { background: #fff; }
.turn { margin: .5rem 0 1rem; font-weight: 600; }

/* Board + tokens */
.board-wrap { position: relative; }
#boardImg { display: block; width: 100%; height: auto; }

/* Support both legacy class and current ID for the token layer */
.tokens-layer,
#tokensLayer {
  position: absolute;
  inset: 0;
  pointer-events: none; /* tokens themselves are not interactive; UI handles clicks elsewhere */
}

/* Players list / chips */
.players-section { margin-top: .5rem; }
.player-pill {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .25rem .5rem;
  margin: .25rem .25rem 0 0;
}
.player-dot {
  display: inline-block;
  width: .8rem;
  height: .8rem;
  border-radius: 50%;
  border: 2px solid #fff; /* keeps token visible on low-contrast boards */
  box-shadow: 0 1px 6px rgba(0,0,0,.2);
}

/* Name editing: input AND contenteditable variants */
.player-name-input,
[contenteditable][data-role="player-name"] {
  display: inline-block;
  min-width: 6rem;
  max-width: 12rem;
  padding: .25rem .5rem;
  font-size: 1rem;
  line-height: 1.2;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: #fff;
}
.player-name-input:focus,
[contenteditable][data-role="player-name"]:focus {
  outline: 2px solid #1d70b8;
  border-color: #1d70b8;
  background: #fff;
}
.player-name { /* legacy hook (kept) */
  border: 1px solid transparent;
  padding: .1rem .25rem;
  min-width: 6ch;
}
.player-name:focus {
  outline: 2px solid #1d70b8;
  background: #fff;
  border-color: #1d70b8;
}

.attrib { color: var(--muted); margin-top: 1rem; }

/* Visibility helpers */
[hidden] { display: none !important; }

/* Modal should be above dice & tokens */
#modalRoot, #modal-root { z-index: 1500; }

/* Dice overlay (support IDs and class) */
#diceOverlay,
.dice-overlay {
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(0,0,0,.6) 0%, rgba(0,0,0,.85) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1200; /* below modalRoot(1500), above board/tokens */
}

.dice-wrapper {
  width: min(70vmin, 720px);
  height: min(70vmin, 720px);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Target #dice if present, else .dice as a class */
#dice,
.dice {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
}

#dice .face,
.dice .face {
  display: none;
  position: absolute;
  inset: 0;
  margin: auto;
  border-radius: 3%;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  width: 100%;
  height: 100%;
}

/* show the correct face */
#dice.show-1 .one, #dice.show-2 .two, #dice.show-3 .three,
#dice.show-4 .four, #dice.show-5 .five, #dice.show-6 .six,
.dice.show-1 .one, .dice.show-2 .two, .dice.show-3 .three,
.dice.show-4 .four, .dice.show-5 .five, .dice.show-6 .six { display: block; }

/* pips */
#dice .face:before, .dice .face:before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 25% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 50% 50%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 75%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 25%, transparent 0 4%, transparent 5%),
    radial-gradient(circle at 25% 75%, transparent 0 4%, transparent 5%),
    radial-gradient(circle at 25% 50%, transparent 0 4%, transparent 5%),
    radial-gradient(circle at 75% 50%, #000 0 4%, transparent 5%);
  background-size: 100% 100%;
}
#dice .two:before, .dice .two:before {
  background:
    radial-gradient(circle at 25% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 75%, #000 0 4%, transparent 5%);
}
#dice .three:before, .dice .three:before {
  background:
    radial-gradient(circle at 25% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 50% 50%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 75%, #000 0 4%, transparent 5%);
}
#dice .four:before, .dice .four:before {
  background:
    radial-gradient(circle at 25% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 25% 75%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 75%, #000 0 4%, transparent 5%);
}
#dice .five:before, .dice .five:before {
  background:
    radial-gradient(circle at 25% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 50% 50%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 25% 75%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 75%, #000 0 4%, transparent 5%);
}
#dice .six:before, .dice .six:before {
  background:
    radial-gradient(circle at 25% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 25%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 25% 50%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 50%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 25% 75%, #000 0 4%, transparent 5%),
    radial-gradient(circle at 75% 75%, #000 0 4%, transparent 5%);
}

/* animation */
@keyframes dice-wobble {
  0% { transform: rotate(0deg) scale(1); }
  25%{ transform: rotate(10deg) scale(1.02); }
  50%{ transform: rotate(-10deg) scale(1.04); }
  75%{ transform: rotate(6deg) scale(1.02); }
  100%{ transform: rotate(0deg) scale(1); }
}
#dice.rolling .face, .dice.rolling .face { animation: dice-wobble .35s ease-in-out infinite; }
@media (prefers-reduced-motion: reduce) {
  #dice.rolling .face, .dice.rolling .face { animation: none; }
}
